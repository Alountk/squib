<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Squib API Documentation
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!file.README.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Squib <a href="https://rubygems.org/gems/squib"><img src="https://badge.fury.io/rb/squib.svg" alt="Gem Version"></a> <a href="https://travis-ci.org/andymeneely/squib"><img src="https://secure.travis-ci.org/andymeneely/squib.svg?branch=master" alt="Build Status"></a> <a href="https://gemnasium.com/andymeneely/squib"><img src="https://gemnasium.com/andymeneely/squib.svg" alt="Dependency Status"></a> <a href="https://coveralls.io/r/andymeneely/squib"><img src="https://img.shields.io/coveralls/andymeneely/squib.svg" alt="Coverage Status"></a> <a href="http://inch-ci.org/github/andymeneely/squib"><img src="http://inch-ci.org/github/andymeneely/squib.png?branch=master" alt="Inline docs"></a></h1>

<p>Squib is a Ruby <a href="http://en.wikipedia.org/wiki/Domain-specific_language">DSL</a> for prototyping card and board games. Write a little bit of Ruby, define your deck&#39;s stats, then compile your game into a series of images ready for print-and-play or even print-on-demand. Squib is very data-driven and built on the principle of Don&#39;t Repeat Yourself. Think of it like <a href="http://www.nand.it/nandeck/">nanDeck</a> done &quot;the Ruby way&quot;. Squib supports:</p>

<ul>
<li>A concise set of rules for laying out your cards</li>
<li>Loading PNGs and SVGs</li>
<li>Complex text rendering using <a href="http://www.pango.org/">Pango</a></li>
<li>Reading <code>xlsx</code> and <code>csv</code> files</li>
<li>Rendering to PNGs, PDFs, and SVGs (sheets or individual files)</li>
<li>Flexible, data-driven layouts in Yaml</li>
<li>Basic shape drawing, blending operators, gradients, etc.</li>
<li>Unit conversion</li>
<li>The full power of Ruby!</li>
</ul>

<p>Squib is based on the <a href="http://cairographics.org/">Cairo</a> graphics rendering engine, the library of choice for WebKit, Gecko, Inkscape and many, many others.</p>

<p>Check this out.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>cards:</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>Hello</span><span class='words_sep'> </span><span class='tstring_content'>World!</span><span class='words_sep'>)</span>
  <span class='id identifier rubyid_save_png'>save_png</span>
<span class='kw'>end</span>
</code></pre>

<p>We just created a 2-card deck with &quot;Hello&quot; on the first card, and &quot;World&quot; on the second, and saved them out to PNGs.</p>

<h2>Installation</h2>

<p>Squib requires Ruby 2.0 or later.</p>

<p>Install it yourself with:</p>

<pre class="code ruby"><code class="ruby">$ gem install squib
</code></pre>

<p>If you&#39;re using Bundler, add this line to your application&#39;s Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>And then execute:</p>

<pre class="code ruby"><code class="ruby">$ bundle
</code></pre>

<p>Note: Squib has some native dependencies, such as <a href="https://github.com/rcairo/rcairo">Cairo</a>, <a href="http://ruby-gnome2.sourceforge.jp/hiki.cgi?Pango%3A%3ALayout">Pango</a>, and <a href="http://nokogiri.org/">Nokogiri</a>, which may require compiling C code to install. This is usually not painful at all, and is automated through Bundler/RubyGems, but can cause headaches on some setups.</p>

<ul>
<li>Windows: I recommend using the <em>non-64 bit</em> RubyInstaller at <a href="http://rubyinstaller.org">http://rubyinstaller.org</a>. Some installations will also need DevKit. Currently, Ruby 2.2 on Windows conflicts with one of Squib&#39;s dependencies called Nokogiri (read the WTF-y issue here: <a href="https://github.com/sparklemotion/nokogiri/issues/1256">https://github.com/sparklemotion/nokogiri/issues/1256</a>) UPDATE: their pre-releases have fixed this exact issue - just install nokogiri-1.6.7.rc3-x64-mingw32 (or higher). Or, as a last resort, use 2.1 or 2.0 for Windows users.</li>
<li>Mac: I recommend using <a href="https://rvm.io">rvm</a>. Some users have reported that Ruby 2.1 will not work with Mac OSX 10.10.4 (#88) - Ruby 2.0 and 2.2 are confirmed to work however (this is an rcairo issue, not a Squib issue).</li>
<li>Cywgin is not supported, but could theoretically work with extra installation steps. See <a href="http://boardgamegeek.com/article/18508113#18508113">this thread</a>. Contributions in this area are welcome.</li>
<li>Linux. No known installation issues. Happy installing!</li>
</ul>

<h2>Getting Started</h2>

<p>After installing Squib, you can create a project and run your first build like this:</p>

<pre class="code sh"><code class="sh">$ squib new my-cool-game
$ cd my-cool-game
$ ruby deck.rb
</code></pre>

<p>The <code>squib new</code> command will generate files and folders like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid__output'>_output</span><span class='op'>/</span><span class='id identifier rubyid_gitkeep'>gitkeep</span><span class='period'>.</span><span class='id identifier rubyid_txt'>txt</span><span class='period'>
</span><span class='id identifier rubyid_.gitignore'>.gitignore</span>
<span class='const'>ABOUT</span><span class='period'>.</span><span class='id identifier rubyid_md'>md</span>
<span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_yml'>yml</span>
<span class='id identifier rubyid_deck'>deck</span><span class='period'>.</span><span class='id identifier rubyid_rb'>rb</span>
<span class='const'>Gemfile</span>
<span class='id identifier rubyid_layout'>layout</span><span class='period'>.</span><span class='id identifier rubyid_yml'>yml</span>
<span class='const'>PNP</span> <span class='const'>NOTES</span><span class='period'>.</span><span class='id identifier rubyid_md'>md</span>
</code></pre>

<p>The central file here is <code>deck.rb</code>. Here&#39;s a <a href="https://github.com/andymeneely/squib/tree/master/samples/basic.rb">basic example</a> of a deck to work from:</p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Grifter</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mastermind</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>level</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rbrace'>}</span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>width:</span> <span class='int'>825</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1125</span><span class='comma'>,</span> <span class='label'>cards:</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='int'>38</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>38</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>750</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1050</span><span class='comma'>,</span> <span class='label'>radius:</span> <span class='int'>38</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='int'>75</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>75</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>128</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>128</span><span class='comma'>,</span> <span class='label'>radius:</span> <span class='int'>25</span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>220</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>78</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 54</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>75</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>85</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>128</span><span class='comma'>,</span>
       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 72</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>align:</span> <span class='symbol'>:center</span>

  <span class='id identifier rubyid_png'>png</span> <span class='label'>range:</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>620</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>75</span>
  <span class='id identifier rubyid_svg'>svg</span> <span class='label'>range:</span> <span class='int'>1</span><span class='op'>..</span><span class='int'>2</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>620</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>218</span>

  <span class='id identifier rubyid_save'>save</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>basic_</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:png</span>
<span class='kw'>end</span></pre></p>

<p>About the other files:</p>

<ul>
<li><code>Gemfile</code> is for adding in other gems if you are using <code>bundler</code></li>
<li><code>config.yml</code> is a skeleton config file with various options commented out. See <a href="index.html#Configuration_File" title="Configuration File">Configuration File</a>.</li>
<li><code>layout.yml</code> is a skeleton layout file if you want to use it. See <a href="index.html#Custom_Layouts" title="Custom Layouts">Custom Layouts</a>.</li>
<li><code>_output</code> is the directory where your built files will go. Can easily be changed, of course.</li>
<li><code>.gitignore</code> and <code>gitkeep.txt</code> are for if you are using Git. See <a href="index.html#Source_control" title="Source control">Source control</a>. (Feel free to remove these if you are not using Git.)</li>
<li><code>ABOUT.md</code> and <code>PHP NOTES.md</code> are Markdown files for posting. Not used by Squib, but there by convention.</li>
<li><code>Rakefile</code> is a basic build file. Not required but handy - see <a href="index.html#Rakefile" title="Rakefile">Rakefile</a></li>
</ul>

<h1>Learning Squib</h1>

<p>In addition to this README, be sure to also check out the following resources for more details:</p>

<ul>
<li>The <code>samples</code> directory in the <a href="https://github.com/andymeneely/squib">source repository</a> has lots of examples.</li>
<li><a href="https://github.com/andymeneely/iconoclast">Iconoclast</a> is a basic set collection game I&#39;m developing from scratch with Squib. Be sure to read the <a href="https://github.com/andymeneely/iconoclast/commits/master">commit history</a> to see how the game has developed from scratch.</li>
<li><a href="https://github.com/andymeneely/junk-land">Junk Land</a> is my own creation that&#39;s uses Squib for full-color rendering, and makes use of Ruby in a lot of interesting ways.</li>
</ul>

<h2>Viewing this README</h2>

<p>The best place to read this documentation is on <a href="http://andymeneely.github.io/squib/doc">our website</a>. Be sure to check out the method-by-method documentation, particularly for the <a href="Squib/Deck.html">Deck</a> class.</p>

<p>If you want to view it offline, you can do the following</p>

<pre class="code sh"><code class="sh">$ gem install yard
$ yard server --gems
</code></pre>

<p>Then go to <a href="http://localhost:8808/docs/squib/file/README.md">http://localhost:8808/docs/squib/file/README.md</a></p>

<p>If you&#39;re viewing this on Github, you might see some confusing tags like <code>{include:file:...}</code> - these are directives for YARD to show the embedded examples. Github doesn&#39;t render those and you might find them helpful.</p>

<p>Also, RubyDoc.info linked from RubyGems appears to be perpetually broken and doesn&#39;t support <code>{include:file...}</code> directive properly, so the embedded samples will also not show up there, either.</p>

<h2>Squib Decks and Cards</h2>

<p>The Squib DSL is based on a collection of methods provided to the <code>Squib::Deck</code> class. The general philosophy of Squib is to specify as little as possible with layers of defaults, highly flexible input, and good ol&#39; Ruby duck-typing. Ruby does a lot to make Squib useful.</p>

<p>Squib essentially has two main classes: <code>Deck</code> and <code>Card</code>. <code>Deck</code> is the front-end, and <code>Card</code> is the back-end. The contract of <code>Deck</code> is to do the various manipulations of options and then delegate the operation to <code>Card</code> to do the low-level graphical operations.</p>

<p>For most users, I recommending solely using <code>Deck</code> methods. If you want to roll up your sleeves and get your hands messy, you can access the Cairo or Pango contexts the directly via the <code>Card</code> class. The API documentation doesn&#39;t really cover these, however, so you&#39;re on your own there.</p>

<h2>Specifying Parameters</h2>

<p>Squib is all about sane defaults and shorthand specification. Arguments are almost always using hashes, which look a lot like <a href="http://www.ruby-doc.org/core-2.0.0/doc/syntax/calling_methods_rdoc.html#label-Keyword+Arguments">Ruby 2.0&#39;s named parameters</a>. This means you can specify your parameters in any order you please. All parameters are optional. For example <code>x</code> and <code>y</code> default to 0 (i.e. the upper-left corner of the card). Any parameter that is specified in the command overrides any Squib defaults, <code>config.yml</code> settings, or layout rules.</p>

<p>Note: you MUST use named parameters rather than positional parameters. For example: <code>save :png</code> will lead to an error like this:</p>

<pre class="code ruby"><code class="ruby">C:/Ruby200/lib/ruby/gems/2.0.0/gems/squib-0.0.3/lib/squib/api/save.rb:12:in `save&#39;: wrong number of arguments (2 for 0..1) (ArgumentError)
    from deck.rb:22:in `block in &lt;main&gt;&#39;
    from C:/Ruby200/lib/ruby/gems/2.0.0/gems/squib-0.0.3/lib/squib/deck.rb:60:in `instance_eval&#39;
    from C:/Ruby200/lib/ruby/gems/2.0.0/gems/squib-0.0.3/lib/squib/deck.rb:60:in `initialize&#39;
    from deck.rb:18:in `new&#39;
    from deck.rb:18:in `&lt;main&gt;&#39;
</code></pre>

<p>Instead, you must name the parameters: <code>save format: :png</code></p>

<h2>Arrays and Singleton Expansion</h2>

<p>Many inputs to Squib can accept <code>Arrays</code>, which correspond to the entire deck. In fact, under the hood, if Squib is <em>not</em> given an array, it expands it out to an array before rendering. This allows for different styles to apply to different cards. This example comes from the <a href="https://github.com/andymeneely/squib/tree/master/samples/ranges.rb">ranges.rb example</a></p>

<pre class="code ruby"><code class="ruby"><span class='comment'># This renders three cards, with three strings that had three different colors at three different locations.
</span><span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>red</span><span class='words_sep'> </span><span class='tstring_content'>green</span><span class='words_sep'> </span><span class='tstring_content'>blue</span><span class='words_sep'>)</span><span class='comma'>,</span>
     <span class='label'>color:</span> <span class='lbracket'>[</span><span class='symbol'>:red</span><span class='comma'>,</span> <span class='symbol'>:green</span><span class='comma'>,</span> <span class='symbol'>:blue</span><span class='rbracket'>]</span><span class='comma'>,</span>
     <span class='label'>x:</span> <span class='lbracket'>[</span><span class='int'>40</span><span class='comma'>,</span> <span class='int'>80</span><span class='comma'>,</span> <span class='int'>120</span><span class='rbracket'>]</span><span class='comma'>,</span>
     <span class='label'>y:</span> <span class='lbracket'>[</span><span class='int'>700</span><span class='comma'>,</span> <span class='int'>750</span><span class='comma'>,</span> <span class='int'>800</span><span class='rbracket'>]</span>
</code></pre>

<p>Under the hood, Squib actually views every argument as applied each card individually. If a single argument is given to the command, it&#39;s considered a singleton that gets expanded into a deck-sized array. Supplying the array bypasses that expansion - which means that any array you supply instead of a singleton ought to be the same size as the deck and align the same way the indexes in the supplied <code>range</code> are. If you don&#39;t, Ruby will fill that up with nils and not apply the rule across those cards.</p>

<h2>Specifying Ranges</h2>

<p>Most public <code>Deck</code> methods allow a <code>range</code> to be specified as a first parameter. This parameter is used to access an internal <code>Array</code> of <code>Squib::Cards</code>. This can be an actual Ruby range, or anything that implements <code>#each</code> (thus can be an <code>Enumerable</code>). Integers are also supported for changing one card only. Negatives work from the back of the deck. Here are some examples from <code>samples/ranges.rb</code> found <a href="https://github.com/andymeneely/squib/tree/master/samples/ranges.rb">here</a></p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Grifter</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mastermind</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thug</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thinker</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thinker</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>level</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rbrace'>}</span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>width:</span> <span class='int'>825</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1125</span><span class='comma'>,</span> <span class='label'>cards:</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='comment'># Default range is :all
</span>  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>250</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>55</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 54</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>40</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 72</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># Could be explicit about using :all, too
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='symbol'>:all</span><span class='comma'>,</span>
       <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>40</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>128</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 18</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>width:</span> <span class='int'>100</span><span class='comma'>,</span> <span class='label'>align:</span> <span class='symbol'>:center</span>

  <span class='comment'># Ranges are inclusive, zero-based
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='int'>0</span><span class='op'>..</span><span class='int'>1</span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief and Grifter only!!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>25</span><span class='comma'>,</span> <span class='label'>y:</span><span class='int'>200</span>

  <span class='comment'># Integers are also allowed
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief only!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>25</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>250</span>

  <span class='comment'># Negatives go from the back of the deck
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mastermind only!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>25</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>250</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='op'>-</span><span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Grifter and Mastermind only!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>25</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>650</span>

  <span class='comment'># We can use Arrays too!
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief and Mastermind only!!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>25</span><span class='comma'>,</span> <span class='label'>y:</span><span class='int'>300</span>

  <span class='comment'># Just about everything in Squib can be given an array that
</span>  <span class='comment'># corresponds to the deck&#39;s cards. This allows for each card to be styled differently
</span>  <span class='comment'># This renders three cards, with three strings that had three different colors at three different locations.
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>red</span><span class='words_sep'> </span><span class='tstring_content'>green</span><span class='words_sep'> </span><span class='tstring_content'>blue</span><span class='words_sep'>)</span><span class='comma'>,</span>
       <span class='label'>color:</span> <span class='lbracket'>[</span><span class='symbol'>:red</span><span class='comma'>,</span> <span class='symbol'>:green</span><span class='comma'>,</span> <span class='symbol'>:blue</span><span class='rbracket'>]</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='lbracket'>[</span><span class='int'>40</span><span class='comma'>,</span> <span class='int'>80</span><span class='comma'>,</span> <span class='int'>120</span><span class='rbracket'>]</span><span class='comma'>,</span>
       <span class='label'>y:</span> <span class='lbracket'>[</span><span class='int'>700</span><span class='comma'>,</span> <span class='int'>750</span><span class='comma'>,</span> <span class='int'>800</span><span class='rbracket'>]</span>

  <span class='comment'># Useful idiom: construct a hash from card names back to its index (ID),
</span>  <span class='comment'># then use a range. No need to memorize IDs, and you can add cards easily
</span>  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='semicolon'>;</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_id'>id</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_i'>i</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='id identifier rubyid_id'>id</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='op'>..</span><span class='id identifier rubyid_id'>id</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Grifter</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
       <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief through Grifter with id lookup!!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span><span class='int'>25</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>400</span>

  <span class='comment'># Useful idiom: generate arrays from a column called &#39;type&#39;
</span>  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='semicolon'>;</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='comma'>,</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='lbracket'>[</span><span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_i'>i</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>range:</span> <span class='id identifier rubyid_type'>type</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thinker</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
       <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Only for Thinkers!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span><span class='int'>25</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>500</span>

  <span class='comment'># Useful idiom: draw a different number of images for different cards
</span>  <span class='id identifier rubyid_hearts'>hearts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='comment'>#i.e. card 0 has no hearts, card 2 has 2 hearts drawn
</span>  <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
    <span class='id identifier rubyid_range'>range</span> <span class='op'>=</span> <span class='id identifier rubyid_hearts'>hearts</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_hearts'>hearts</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_n'>n</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='id identifier rubyid_svg'>svg</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>range:</span> <span class='id identifier rubyid_range'>range</span><span class='comma'>,</span>
          <span class='label'>x:</span> <span class='int'>150</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>55</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span><span class='op'>*</span><span class='int'>42</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>40</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>40</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>black</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># just a border
</span>  <span class='id identifier rubyid_save_sheet'>save_sheet</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ranges_</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>columns:</span> <span class='int'>3</span>
<span class='kw'>end</span></pre></p>

<h2>Units</h2>

<p>By default, Squib thinks in pixels. This decision was made so that we can have pixel-perfect layouts without automatically scaling everything, even though working in units is sometimes easier. We provide some conversion methods, including looking for strings that end in &quot;in&quot; and &quot;cm&quot; and computing based on the current DPI. The dpi is set on <code>Squib::Deck.new</code> (not <code>config.yml</code>). Example is in <code>samples/units.rb</code> found <a href="https://github.com/andymeneely/squib/tree/master/samples/units.rb">here</a></p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ddd</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># We can use our DSL-method to use inches
</span>  <span class='comment'># Computed using @dpi (set to 300 by default)
</span>  <span class='id identifier rubyid_bleed'>bleed</span>      <span class='op'>=</span> <span class='id identifier rubyid_inches'>inches</span><span class='lparen'>(</span><span class='float'>0.125</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cut_width'>cut_width</span>  <span class='op'>=</span> <span class='id identifier rubyid_inches'>inches</span><span class='lparen'>(</span><span class='float'>2.5</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cut_height'>cut_height</span> <span class='op'>=</span> <span class='id identifier rubyid_inches'>inches</span><span class='lparen'>(</span><span class='float'>3.5</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='id identifier rubyid_bleed'>bleed</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_bleed'>bleed</span><span class='comma'>,</span> <span class='label'>radius:</span> <span class='int'>25</span><span class='comma'>,</span>
       <span class='label'>width:</span> <span class='id identifier rubyid_cut_width'>cut_width</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='id identifier rubyid_cut_height'>cut_height</span>

  <span class='comment'># We can also use cm this way
</span>  <span class='id identifier rubyid_cm'>cm</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>

  <span class='comment'># Or we can use a string ending with cm or in
</span>  <span class='comment'>#  (even cleaner in Yaml since we don&#39;t need quotes!)
</span>  <span class='id identifier rubyid_safe_margin'>safe_margin</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.25in</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_safe_width'>safe_width</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.25in</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_safe_height'>safe_height</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.25in</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='id identifier rubyid_safe_margin'>safe_margin</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_safe_margin'>safe_margin</span><span class='comma'>,</span>
  	   <span class='label'>width:</span> <span class='id identifier rubyid_safe_width'>safe_width</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='id identifier rubyid_safe_height'>safe_height</span><span class='comma'>,</span> <span class='label'>radius:</span> <span class='int'>25</span>

  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>4cm</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>y:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>4 cm  </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>100</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>100</span>

  <span class='id identifier rubyid_save'>save</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>units_</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:png</span>
<span class='kw'>end</span></pre></p>

<h2>Specifying Colors &amp; Gradients</h2>

<p>Colors can be specified in a wide variety of ways, mostly in a hex-string. Take a look at the examples from <code>samples/colors.rb</code>, found <a href="https://github.com/andymeneely/squib/tree/master/samples/colors.rb">here</a></p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>width:</span> <span class='int'>825</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1125</span><span class='comma'>,</span> <span class='label'>cards:</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>

  <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#f00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3-hex</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#f00</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3-hex (alpha)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ff0000</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>6-hex</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ff000099</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>8-hex(alpha)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffff00000000</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12-hex</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#ffff000000009999</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>12-hex (alpha)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='symbol'>:burnt_orange</span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Symbols of constants too</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(0,0)(400,0) blue@0.0 red@1.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Linear gradients!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(200,500,10)(200,500,100) blue@0.0 red@1.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Radial gradients!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+=</span><span class='int'>50</span>
  <span class='comment'># see gradients.rb sample for more on gradients
</span>
  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>colors_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='comment'># This script generates a table of the built-in constants
</span><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>width:</span> <span class='int'>3000</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1500</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_colors'>colors</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Cairo</span><span class='op'>::</span><span class='const'>Color</span><span class='period'>.</span><span class='id identifier rubyid_constants'>constants</span> <span class='op'>-</span> <span class='qsymbols_beg'>%i(</span><span class='tstring_content'>HEX_RE</span><span class='words_sep'> </span><span class='tstring_content'>Base</span><span class='words_sep'> </span><span class='tstring_content'>RGB</span><span class='words_sep'> </span><span class='tstring_content'>CMYK</span><span class='words_sep'> </span><span class='tstring_content'>HSV</span><span class='words_sep'> </span><span class='tstring_content'>X11</span><span class='words_sep'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_colors'>colors</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='const'>Cairo</span><span class='op'>::</span><span class='const'>Color</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span><span class='id identifier rubyid_y'>y</span><span class='comma'>,</span><span class='id identifier rubyid_w'>w</span><span class='comma'>,</span><span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>300</span><span class='comma'>,</span><span class='int'>50</span>
  <span class='id identifier rubyid_colors'>colors</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_color'>color</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='label'>fill_color:</span> <span class='id identifier rubyid_color'>color</span>
    <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_color'>color</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='int'>5</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='int'>13</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans Bold 16</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
         <span class='label'>color:</span> <span class='lparen'>(</span><span class='const'>Cairo</span><span class='op'>::</span><span class='const'>Color</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_color'>color</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_hsv'>to_hsv</span><span class='period'>.</span><span class='id identifier rubyid_v'>v</span> <span class='op'>&gt;</span> <span class='float'>0.9</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#000</span><span class='tstring_end'>&#39;</span></span><span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#fff</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_y'>y</span> <span class='op'>+=</span> <span class='id identifier rubyid_h'>h</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>&gt;</span> <span class='ivar'>@height</span>
      <span class='id identifier rubyid_x'>x</span> <span class='op'>+=</span> <span class='id identifier rubyid_w'>w</span>
      <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>color_constants_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre></p>

<p>Under the hood, Squib uses the <code>rcairo</code> <a href="https://github.com/rcairo/rcairo/blob/master/lib/cairo/color.rb">color parser</a> to accept a variety of color specifications, along with over <a href="https://github.com/rcairo/rcairo/blob/master/lib/cairo/colors.rb">300 pre-defined constants</a>. The above sample will generate a table of such constants.</p>

<p>Additionally, in most places where colors are allowed, you may also supply a string that defines a gradient. Squib supports two flavors of gradients: linear and radial. Gradients are specified by supplying some xy coordinates, which are relative to the card (not the command). Each stop must be between 0.0 and 1.0, and you can supply as many as you like. Colors can be specified as above (in any of the hex notations or built-in constant). If you add two (or more) colors at the same stop, then the gradient keeps the colors in the in order specified and treats it like sharp transition.</p>

<p>The format for gradient strings look like this:</p>

<p>Linear:</p>

<pre class="code ruby"><code class="ruby">(x1,y1)(x2,y2) color1@stop1 color2@stop2
</code></pre>

<p>The xy coordinates define the angle of the gradient.</p>

<p>Radial:</p>

<pre class="code ruby"><code class="ruby">(x1,y1,radius1)(x2,y2,radius2) color1@stop1 color2@stop2
</code></pre>

<p>The coordinates specify an inner circle first, then an outer circle.</p>

<p>Check out the following sample from <code>samples/gradients.rb</code>, found <a href="https://github.com/andymeneely/squib/tree/master/samples/colors.rb">here</a></p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='comment'># Just about anywhere Squib takes in a color it can also take in a gradient too
</span>  <span class='comment'># The x-y coordinates on the card itself,
</span>  <span class='comment'># and then color stops are defined between 0 and 1
</span>  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(0,0)(0,1125) #ccc@0.0 #111@1.0</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_line'>line</span> <span class='label'>stroke_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(0,0)(825,0) #111@1.0 #ccc@0.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
      <span class='label'>x1:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>y1:</span> <span class='int'>600</span><span class='comma'>,</span> <span class='label'>x2:</span> <span class='int'>825</span><span class='comma'>,</span> <span class='label'>y2:</span> <span class='int'>600</span><span class='comma'>,</span>
       <span class='label'>stroke_width:</span> <span class='int'>15</span>

  <span class='comment'># Radial gradients look like this
</span>  <span class='id identifier rubyid_circle'>circle</span> <span class='label'>fill_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(425,400,2)(425,400,120) #ccc@0.0 #111@1.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
         <span class='label'>x:</span> <span class='int'>415</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>415</span><span class='comma'>,</span> <span class='label'>radius:</span> <span class='int'>100</span><span class='comma'>,</span> <span class='label'>stroke_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#0000</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_triangle'>triangle</span> <span class='label'>fill_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(650,400,2)(650,400,120) #ccc@0.0 #111@1.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
           <span class='label'>stroke_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#0000</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
           <span class='label'>x1:</span> <span class='int'>650</span><span class='comma'>,</span> <span class='label'>y1:</span> <span class='int'>360</span><span class='comma'>,</span>
           <span class='label'>x2:</span> <span class='int'>550</span><span class='comma'>,</span> <span class='label'>y2:</span> <span class='int'>500</span><span class='comma'>,</span>
           <span class='label'>x3:</span> <span class='int'>750</span><span class='comma'>,</span> <span class='label'>y3:</span> <span class='int'>500</span>

  <span class='comment'># Gradients are also good for beveling effects:
</span>  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>fill_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(0,200)(0,600) #111@0.0 #ccc@1.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>30</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>350</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>150</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>150</span><span class='comma'>,</span>
       <span class='label'>radius:</span> <span class='int'>15</span><span class='comma'>,</span> <span class='label'>stroke_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#0000</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>fill_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(0,200)(0,600) #111@1.0 #ccc@0.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>40</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>360</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>130</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>130</span><span class='comma'>,</span>
       <span class='label'>radius:</span> <span class='int'>15</span><span class='comma'>,</span> <span class='label'>stroke_color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#0000</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># Alpha transparency can be used too
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>75</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>700</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans Bold 72</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(0,0)(825,0) #000f@0.0 #0000@1.0</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gradient_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre></p>

<h2>Specifying Files</h2>

<p>All files opened for reading or writing (e.g. for <code>png</code> and <code>xlsx</code>) are opened relative to the current directory. Files opened for writing (e.g. for <code>save_png</code>) will be overwritten without warning.</p>

<p>If you find that you <code>cd</code> a lot while working on the command line, your <code>_output</code> folder might get generated in multiple places. An easy way to fix this is to use a <code>Rakefile</code>, <a href="#Rakefile">see below</a></p>

<h2>Working with Text</h2>

<p>The <code>text</code> method is a particularly powerful method with a ton of options. Be sure to check the <a href="/squib/doc/Squib/Deck#text-instance_method">API docs</a> on an option-by-option discussion, but here are the highlights.</p>

<h3>Fonts.</h3>

<p>To set the font, your <code>text</code> method call will look something like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MyFont Bold 32</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>The <code>&#39;MyFont Bold 32&#39;</code> is specified as a &quot;Pango font string&quot;, which can involve <a href="http://ruby-gnome2.osdn.jp/hiki.cgi?Pango%3A%3AFontDescription#Pango%3A%3AFontDescription.new">a lot of options</a> including backup font families, size, all-caps, stretch, oblique, italic, and degree of boldness. (These options are only available if the underlying font supports them, however.) Here&#39;s are some <code>text</code> calls with different Pango font strings:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 18</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial,Verdana weight=900 style=oblique 36</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Times New Roman,Sans 25</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Note: When the font has a space in the name (e.g. Times New Roman), you&#39;ll need to put a backup to get Pango&#39;s parsing to work.</p>

<p>It&#39;s also important to note that most of the font rendering is done by a combination of your installed fonts, your OS, and your graphics card. Thus, different systems will render text slightly differently.</p>

<p>Fonts can also be set globally using the <code>set</code> method. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_set'>set</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 26</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>blah</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># in Arial 26
</span></code></pre>

<p>Furthermore, Squib&#39;s <code>text</code> method has options such as <code>font_size</code> that allow you to override the font string. This means that you can set a blanket font for the whole deck, then adjust sizes from there. This is useful with layouts and <code>extends</code> too.</p>

<h3>Width and Height</h3>

<p>By default, Pango text boxes will scale the text box to whatever you need, hence the <code>:native</code> default. However, for most of the other customizations to work (e.g. center-aligned) you&#39;ll need to specify the width. If both the width and the height are specified and the text overflows, then the <code>ellipsize</code> option is consulted to figure out what to do with the overflow. Also, the <code>valign</code> will only work if <code>height</code> is also set to something other than <code>:native</code>.</p>

<h3>Hints</h3>

<p>Laying out text by typing in numbers can be confusing. What Squib calls &quot;hints&quot; is merely a rectangle around the text box. Hints can be turned on globally in the config file, using the <code>set</code> method, or in an individual text method. These are there merely for prototyping and are not intended for production. Additionally, these are not to be conflated with &quot;rendering hints&quot; that Pango and Cairo mention in their documentation.</p>

<h3>Extents</h3>

<p>Sometimes you want size things based on the size of your rendered text. For example, drawing a rectangle around card&#39;s title such that the rectangle perfectly fits. Squib returns the final rendered size of the text so you can work with it afterward. It&#39;s an array of hashes that correspond to each card. The output looks like this:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>cards:</span> <span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_extents'>extents</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>World!</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_extents'>extents</span>
<span class='kw'>end</span>
</code></pre>

<p>Will output:</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='lbrace'>{</span><span class='symbol'>:width</span><span class='op'>=&gt;</span><span class='int'>109</span><span class='comma'>,</span> <span class='symbol'>:height</span><span class='op'>=&gt;</span><span class='int'>55</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:width</span><span class='op'>=&gt;</span><span class='int'>142</span><span class='comma'>,</span> <span class='symbol'>:height</span><span class='op'>=&gt;</span><span class='int'>55</span><span class='rbrace'>}</span><span class='rbracket'>]</span> <span class='comment'># Hello was 109 pixels wide, World 142 pixels
</span></code></pre>

<h3>Embedding Images</h3>

<p>Squib can embed icons into the flow of text. To do this, you need to define text keys for Squib to look for, and then the corresponding files. The object given to the block is a <a href="docs/Squib/TextEmbed">TextEmbed</a>, which supports PNG and SVG. Here&#39;s a minimal example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Gain 1 :health:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
  <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heart.svg</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<h3>Markup</h3>

<p>If you want to do specialized formatting within a given string, Squib has lots of options. By setting <code>markup: true</code>, you enable tons of text processing. This includes:</p>

<ul>
<li>Pango Markup. This is an HTML-like formatting language that specifies formatting inside your string. Pango Markup essentially supports any formatting option, but on a letter-by-letter basis. Such as: font options, letter spacing, gravity, color, etc. See the <a href="https://developer.gnome.org/pango/stable/PangoMarkupFormat.html">Pango docs</a> for details.</li>
<li>Quotes are converted to their curly counterparts where appropriate (i.e. &ldquo;smart quotes&rdquo; instead of &quot;straight quotes&quot;).</li>
<li>Apostraphes are converted to curly as well.</li>
<li>LaTeX-style quotes are explicitly converted (<tt>``like this&#39;&#39;</tt>)</li>
<li>Em-dash and en-dash are converted with triple and double-dashes respectively (<tt>--</tt> is an en-dash, and <tt>---</tt> becomes an em-dash.)</li>
<li>Ellipses can be specified with <tt>...</tt>. Note that this is entirely different from the <code>ellipsize</code> option (which determines what to do with overflowing text).</li>
</ul>

<p>A few notes:</p>

<ul>
<li>Smart quoting assumes the UTF-8 character set.</li>
<li>Pango markup uses an XML/HTML-ish processor. Some characters require HTML-entity escaping (e.g. <code>&amp;amp;</code> for `&amp;&#39;)</li>
</ul>

<h3>Text Sample</h3>

<pre class="code yaml"><code class="yaml">  lsquote: &quot;\u2018&quot; #note that Yaml wants double quotes here to use escape chars
  rsquote: &quot;\u2019&quot;
  ldquote: &quot;\u201C&quot;
  rdquote: &quot;\u201D&quot;
  em_dash: &quot;\u2014&quot;
  en_dash: &quot;\u2013&quot;
  ellipsis: &quot;\u2026&quot;
</code></pre>

<p>You can also disable the auto-quoting mechanism by setting <code>smart_quotes: false</code> in your config. Explicit replacements will still be performed.</p>

<h3>Text Samples</h3>

<p>Examples of all of the above are crammed into the <code>text_options.rb</code> sample <a href="https://github.com/andymeneely/squib/tree/master/samples/text_options.rb">found here</a>.</p>

<p><pre class="code ruby"><span class='comment'># encoding: UTF-8
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Thief</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Grifter</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Mastermind</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>level</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_longtext'>longtext</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This is left-justified text, with newlines.\nWhat do you know about tweetle beetles? well... When tweetle beetles fight, it&#39;s called a tweetle beetle battle. And when they battle in a puddle, it&#39;s a tweetle beetle puddle battle. AND when tweetle beetles battle with paddles in a puddle, they call it a tweetle beetle puddle paddle battle. AND... When beetles battle beetles in a puddle paddle battle and the beetle battle puddle is a puddle in a bottle... ..they call this a tweetle beetle bottle puddle paddle battle muddle.</span><span class='tstring_end'>&quot;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>width:</span> <span class='int'>825</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1125</span><span class='comma'>,</span> <span class='label'>cards:</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='int'>15</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>15</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>795</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1095</span><span class='comma'>,</span> <span class='label'>x_radius:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y_radius:</span> <span class='int'>50</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='int'>30</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>30</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>128</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>128</span><span class='comma'>,</span> <span class='label'>x_radius:</span> <span class='int'>25</span><span class='comma'>,</span> <span class='label'>y_radius:</span> <span class='int'>25</span>

  <span class='comment'># Arrays are rendered over each card
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>250</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>55</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial weight=900 54</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>40</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 72</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>color:</span> <span class='symbol'>:burnt_orange</span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Font strings are expressive!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span><span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>200</span><span class='comma'>,</span>
       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Impact bold italic 36</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Font strings are expressive!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span><span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>300</span><span class='comma'>,</span>
       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial,Verdana weight=900 style=oblique 36</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Font string sizes can be overridden per card.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>350</span><span class='comma'>,</span>
       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Impact 36</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>font_size:</span> <span class='lbracket'>[</span><span class='int'>16</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>24</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This text has fixed width, fixed height, center-aligned, middle-valigned, and has a red hint</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>hint:</span> <span class='symbol'>:red</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>400</span><span class='comma'>,</span>
       <span class='label'>width:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>125</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:center</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MIDDLE</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='comment'># these can be specified with case-insenstive strings too
</span>       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Serif 16</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_extents'>extents</span> <span class='op'>=</span> <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Ink extent return value</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>550</span><span class='comma'>,</span>
       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans Bold</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>font_size:</span> <span class='lbracket'>[</span><span class='int'>16</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>24</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_margin'>margin</span> <span class='op'>=</span> <span class='int'>10</span>
  <span class='comment'># Extents come back as an array of hashes, which can get split out like this
</span>  <span class='id identifier rubyid_ws'>ws</span> <span class='op'>=</span> <span class='id identifier rubyid_extents'>extents</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_arr'>arr</span><span class='comma'>,</span> <span class='id identifier rubyid_ext'>ext</span><span class='op'>|</span> <span class='id identifier rubyid_arr'>arr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_ext'>ext</span><span class='lbracket'>[</span><span class='symbol'>:width</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='int'>10</span><span class='semicolon'>;</span> <span class='id identifier rubyid_arr'>arr</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_hs'>hs</span> <span class='op'>=</span> <span class='id identifier rubyid_extents'>extents</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_arr'>arr</span><span class='comma'>,</span> <span class='id identifier rubyid_ext'>ext</span><span class='op'>|</span> <span class='id identifier rubyid_arr'>arr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_ext'>ext</span><span class='lbracket'>[</span><span class='symbol'>:height</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='int'>10</span><span class='semicolon'>;</span> <span class='id identifier rubyid_arr'>arr</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='int'>65</span> <span class='op'>-</span> <span class='id identifier rubyid_margin'>margin</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>550</span> <span class='op'>-</span> <span class='id identifier rubyid_margin'>margin</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span>
       <span class='label'>width:</span> <span class='id identifier rubyid_ws'>ws</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='id identifier rubyid_hs'>hs</span><span class='comma'>,</span>
       <span class='label'>radius:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>stroke_color:</span> <span class='symbol'>:black</span>

  <span class='comment'># If width &amp; height are defined and the text will overflow the box, we can ellipsize.
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ellipsization!\nThe ultimate question of life, the universe, and everything to life and everything is 42</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='label'>hint:</span> <span class='symbol'>:green</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 22</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>450</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>400</span><span class='comma'>,</span>
       <span class='label'>width:</span> <span class='int'>280</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>180</span><span class='comma'>,</span>
       <span class='label'>ellipsize:</span> <span class='kw'>true</span>

  <span class='comment'># Text hints are guides for showing you how your text boxes are laid out exactly
</span>  <span class='id identifier rubyid_hint'>hint</span> <span class='label'>text:</span> <span class='symbol'>:cyan</span>
  <span class='id identifier rubyid_set'>set</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Serif 20</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># Impacts all future text calls (unless they specify differently)
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Text hints &amp; fonts are globally togglable!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>625</span>
  <span class='id identifier rubyid_set'>set</span> <span class='label'>font:</span> <span class='symbol'>:default</span> <span class='comment'># back to Squib-wide default
</span>  <span class='id identifier rubyid_hint'>hint</span> <span class='label'>text:</span> <span class='symbol'>:off</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>See? No hint here.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='label'>x:</span> <span class='int'>565</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>625</span><span class='comma'>,</span>
        <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 22</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># Text can be rotated, in radians, about the upper-left corner of the text box.
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Rotated</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
        <span class='label'>x:</span> <span class='int'>565</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>675</span><span class='comma'>,</span> <span class='label'>angle:</span> <span class='float'>0.2</span><span class='comma'>,</span>
        <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 18</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:red</span>

  <span class='comment'># Text can be justified, and have newlines
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_longtext'>longtext</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 16</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>700</span><span class='comma'>,</span>
       <span class='label'>width:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.5in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>height:</span> <span class='id identifier rubyid_inches'>inches</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='comma'>,</span>
       <span class='label'>justify:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>spacing:</span> <span class='op'>-</span><span class='int'>6</span>

  <span class='comment'># Here&#39;s how you embed images into text.
</span>  <span class='comment'># Pass a block to the method call and use the given context
</span>  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Embedded icons! Take 1 :tool: and gain 2:health:. If Level 2, take 2 :tool:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 18</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.8in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>y:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.5in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.85in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:left</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fill n &lt;span fgcolor=\&quot;\#ff0000\&quot;&gt;stroke&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='label'>color:</span> <span class='symbol'>:green</span><span class='comma'>,</span> <span class='label'>stroke_width:</span> <span class='float'>2.0</span><span class='comma'>,</span> <span class='label'>stroke_color:</span> <span class='symbol'>:blue</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.8in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>y:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2.9in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.85in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans Bold 26</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>markup:</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stroke n &lt;span fgcolor=\&quot;\#ff0000\&quot;&gt;fill&lt;/span&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='label'>color:</span> <span class='symbol'>:green</span><span class='comma'>,</span> <span class='label'>stroke_width:</span> <span class='float'>2.0</span><span class='comma'>,</span> <span class='label'>stroke_color:</span> <span class='symbol'>:blue</span><span class='comma'>,</span> <span class='label'>stroke_strategy:</span> <span class='symbol'>:stroke_first</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.8in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>y:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.0in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.85in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans Bold 26</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>markup:</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dotted</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='label'>color:</span> <span class='symbol'>:white</span><span class='comma'>,</span> <span class='label'>stroke_width:</span> <span class='float'>2.0</span><span class='comma'>,</span> <span class='label'>dash:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>4 2</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>stroke_color:</span> <span class='symbol'>:black</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.8in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>y:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3.1in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.85in</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans Bold 26</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>markup:</span> <span class='kw'>true</span>
  <span class='comment'>#
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;b&gt;Markup&lt;/b&gt; is &lt;i&gt;quite&lt;/i&gt; &lt;s&gt;&#39;easy&#39;&lt;/s&gt; &lt;span fgcolor=\&quot;\#ff0000\&quot;&gt;awesome&lt;/span&gt;. Can&#39;t beat those \&quot;smart\&quot; &#39;quotes&#39;, now with 10--20% more en-dashes --- and em-dashes --- with explicit ellipses too...</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='label'>markup:</span> <span class='kw'>true</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>1000</span><span class='comma'>,</span>
       <span class='label'>width:</span> <span class='int'>750</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>100</span><span class='comma'>,</span>
       <span class='label'>valign:</span> <span class='symbol'>:bottom</span><span class='comma'>,</span>
       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Serif 18</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:cyan</span>

  <span class='id identifier rubyid_save'>save</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text_</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:png</span>
<span class='kw'>end</span></pre></p>

<p>The <code>embed_text.rb</code> sample has more examples of embedding text, which can be <a href="https://github.com/andymeneely/squib/tree/master/samples/embed_text.rb">found here</a>.</p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>825</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1125</span><span class='comma'>,</span> <span class='label'>stroke_width:</span> <span class='float'>2.0</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Take 11 :tool: and gain 2 :health:. Take &lt;b&gt;2&lt;/b&gt; :tool: &lt;i&gt;and gain 3 :purse: if level 2.&lt;/i&gt;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 21</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:red</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:left</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='comment'># Notice how we use dx and dy to adjust the icon to not rest directly on the baseline
</span>    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>dx:</span>  <span class='int'>0</span><span class='comma'>,</span> <span class='label'>dy:</span> <span class='int'>4</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>dx:</span> <span class='op'>-</span><span class='int'>2</span><span class='comma'>,</span> <span class='label'>dy:</span> <span class='int'>4</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_png'>png</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:purse:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>dx:</span>  <span class='int'>0</span><span class='comma'>,</span> <span class='label'>dy:</span> <span class='int'>4</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Middle align: Take 1 :tool: and gain 2 :health:. Take 2 :tool: and gain 3 :purse:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 21</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>200</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='symbol'>:middle</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:left</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:cyan</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_png'>png</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:purse:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This :tool: aligns on the bottom properly. :purse:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 21</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>400</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='symbol'>:bottom</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:left</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:green</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_png'>png</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:purse:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Wrapping multiples: These are 1 :tool::tool::tool: and these are multiple :tool::tool: :tool::tool:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 21</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>600</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='symbol'>:middle</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:left</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:cyan</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:Justify will :tool: work too, and :purse: with more words just for fun</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 21</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>320</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='symbol'>:bottom</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:left</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:magenta</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_png'>png</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:purse:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Right-aligned works :tool: with :health: and :purse:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 21</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>200</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>320</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='symbol'>:bottom</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:right</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:magenta</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_png'>png</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:purse:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:Center-aligned works :tool: with :health: and :purse:</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans 21</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>400</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>320</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:center</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:magenta</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>data:</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_png'>png</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:purse:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>  <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_embed_text'>embed_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Markup --- and typography replacements --- with &quot;:tool:&quot; icons &lt;i&gt;won\&#39;t&lt;/i&gt; fail</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_embed_text'>embed_text</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Serif 18</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>markup:</span> <span class='kw'>true</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>600</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>320</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:center</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:magenta</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>28</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>embed_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>cards:</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_str'>str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Take 1 :tool: and gain 2 :health:.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='label'>str:</span> <span class='id identifier rubyid_str'>str</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>font_size:</span> <span class='lbracket'>[</span><span class='int'>18</span><span class='comma'>,</span> <span class='int'>26</span><span class='comma'>,</span> <span class='int'>35</span><span class='rbracket'>]</span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>180</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='symbol'>:bottom</span><span class='comma'>,</span>
       <span class='label'>align:</span> <span class='symbol'>:left</span><span class='comma'>,</span> <span class='label'>ellipsize:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>justify:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:cyan</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_embed'>embed</span><span class='op'>|</span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:tool:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>   <span class='label'>width:</span> <span class='lbracket'>[</span><span class='int'>28</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='int'>56</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='lbracket'>[</span><span class='int'>28</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='int'>56</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_embed'>embed</span><span class='period'>.</span><span class='id identifier rubyid_svg'>svg</span> <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:health:</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>width:</span> <span class='lbracket'>[</span><span class='int'>28</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='int'>56</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='lbracket'>[</span><span class='int'>28</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='int'>56</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>glass-heart.svg</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_save_sheet'>save_sheet</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>embed_multisheet_</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>columns:</span> <span class='int'>3</span>
<span class='kw'>end</span></pre></p>

<p>The <code>config_text_markup.rb</code> sample demonstrates how quoting can be configured, <a href="https://github.com/andymeneely/squib/tree/master/samples/config_text_markup.rb">found here</a></p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>config:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config_text_markup.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>&quot;&#39;Yaml ain&#39;t markup&#39;, he says&quot;</span><span class='tstring_end'>}</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>200</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Serif 20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>markup:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:cyan</span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Notice also the antialiasing method.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>320</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>200</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial Bold 20</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config_text_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>config:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config_disable_quotes.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>This has typographic sugar --- and ``explicit&#39;&#39; quotes --- but the quotes are &quot;dumb&quot;</span><span class='tstring_end'>}</span></span><span class='comma'>,</span>
       <span class='label'>x:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>300</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>200</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Serif 20</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
       <span class='label'>markup:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:cyan</span>
  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>config_disable_text_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre></p>

<h2>Custom Layouts</h2>

<p>Working with x-y coordinates all the time can be tiresome, and ideally everything in a game prototype should be data-driven and easily changed. For this, many Squib methods allow for a <code>layout</code> to be set. In essence, layouts are a way of setting default values for any argument given to the command.</p>

<p>To use a layout, set the <code>layout:</code> option on a <code>Deck.new</code> command to point to a YAML file. Any command that allows a <code>layout</code> option can be set with a Ruby symbol or String, and the command will then load the specified <code>x</code>, <code>y</code>, <code>width</code>, and <code>height</code>. The individual command can also override these options.</p>

<p>Instead of this:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># deck.rb
</span><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-layout.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>x:</span> <span class='int'>75</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>75</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>675</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>975</span>
<span class='kw'>end</span>
</code></pre>

<p>You can put your logic in the layout file and reference them:</p>

<pre class="code yaml"><code class="yaml"># custom-layout.yml
frame:
  x: 75
  y: 75
  width: 975
  height: 675
</code></pre>

<p>Then your script looks like this:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># deck.rb
</span><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-layout.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>frame</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>The goal is to make your Ruby code more separate data from logic, which in turn makes your code more readable and maintainable. With <code>extends</code> (see below), layouts become even more powerful in keeping you from repeating yourself.</p>

<p>Note: YAML is very finnicky about not allowing tab characters. Use two spaces for indentation instead. If you get a <code>Psych</code> syntax error, this is likely the culprit. Indendation is also strongly enforced in Yaml too. See the <a href="http://www.yaml.org/YAML_for_ruby.html">Yaml docs</a>.</p>

<h3>Order of Precedence</h3>

<p>Layouts will override Squib&#39;s system defaults, but are overriden by anything specified in the command itself. Thus, the order of precedence looks like this:</p>

<ul>
<li>Use what the command specified</li>
<li>If anything was not yet specified, use what was given in a layout (if a layout was specified in the command and the file was given to the Deck)</li>
<li>If still anything was not yet specified, use what was given in Squib&#39;s defaults.</li>
</ul>

<h3>Special key: <code>extends</code></h3>

<p>Squib provides a way of reusing layouts with the special <code>extends</code> key. When defining an <code>extends</code> key, we can merge in another key and modify data coming in if we want to. This allows us to do things like place text next to an icon and be able to move them with each other. Like this:</p>

<pre class="code yaml"><code class="yaml"># If we change the xy of attack, we move defend too!
attack:
  x: 100
  y: 100
  radius: 100
defend:
  extends: attack
  x: += 50
  #defend now is {:x =&gt; 150, :y =&gt; 100}
</code></pre>

<p>If you want to extend multiple parents, it looks like this:</p>

<pre class="code yaml"><code class="yaml">socrates:
  x: 100
plato:
  y: 200
aristotle:
  extends:
    - socrates
    - plato
  x: += 50
</code></pre>

<p>If multiple keys override the same keys in a parent, the later (&quot;younger&quot;) child takes precedent.</p>

<p>Note that extends keys are similar to Yaml&#39;s <a href="http://www.yaml.org/YAML_for_ruby.html#merge_key">&quot;merge keys&quot;</a>. With merge keys, you can define base styles in one entry, then include those keys elsewhere. For example:</p>

<pre class="code yaml"><code class="yaml">icon: &amp;icon
  width: 50
  height: 50
icon_left
  &lt;&lt;: *icon
  x: 100
# The layout for icon_left will have the width/height from icon!
</code></pre>

<p>If you use both <code>extends</code> and Yaml merge keys, the Yaml merge keys are processed first, then extends. For clarity, however, you&#39;re probably just better off using <code>extends</code> exclusively.</p>

<h3>Multiple layout files</h3>

<p>Squib also supports the combination of multiple layout files. If you provide an <code>Array</code> of files then Squib will merge them sequentially. Colliding keys will be completely re-defined by the later file. Extends is processed after <em>each file</em>. Here&#39;s a complex example:</p>

<pre class="code yaml"><code class="yaml"># load order: a.yml, b.yml

##############
# file a.yml #
##############
grandparent:
  x: 100
parent_a:
  extends: grandparent
  x: += 10   # evaluates to 110
parent_b:
  extends: grandparent
  x: += 20   # evaluates to 120

##############
# file b.yml #
##############
child_a:
  extends: parent_a  # i.e. extends a layout in a separate file
  x: += 3    # evaluates to 113 (i.e 110 + 3)
parent_b:    # redefined
  extends: grandparent
  x: += 30   # evaluates to 130 (i.e. 100 + 30)
child_b:
  extends: parent_b
  x: += 3    # evaluates to 133 (i.e. 130 + 3)
</code></pre>

<p>This can be helpful for:</p>

<ul>
<li>Creating a base layout for structure, and one for color (for easier color/black-and-white switching)</li>
<li>Sharing base layouts with other designers</li>
</ul>

<p>YAML merge keys are NOT supported across multiple files - use <code>extends</code> instead.</p>

<h3>Built-in Layout Files</h3>

<p>Why mess with x-y coordinates when you&#39;re first prototyping your game?!?!? Just use a built-in layout to get your game to the table as quickly as possible.</p>

<p>If your layout file is not found in the current directory, Squib will search for its own set of layout files.  The latest the development version of these can be found <a href="https://github.com/andymeneely/squib/tree/master/lib/squib/layouts">on GitHub</a>. The <code>layouts_builtin.rb</code> sample (found <a href="https://github.com/andymeneely/squib/tree/master/samples/">here</a>) demonstrate built-in layouts based on popular games (e.g. <code>fantasy.yml</code> and <code>economy.yml</code>)</p>

<p>Contributions in this area are particularly welcome!</p>

<h3>Layout Sample</h3>

<p>This sample demonstrates many different ways of using and combining layouts. This is the <code>layouts.rb</code> sample found <a href="https://github.com/andymeneely/squib/tree/master/samples/">here</a></p>

<p><pre class="code ruby"><span class='comment'># encoding: utf-8
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pp</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-layout.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>
  <span class='id identifier rubyid_hint'>hint</span> <span class='label'>text:</span> <span class='symbol'>:cyan</span>

  <span class='comment'># Layouts are YAML files that specify any option as a default
</span>  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>layout:</span> <span class='symbol'>:frame</span>

  <span class='comment'># You can also override a given layout entry in the command
</span>  <span class='id identifier rubyid_circle'>circle</span> <span class='label'>layout:</span> <span class='symbol'>:frame</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>radius:</span> <span class='int'>25</span>

  <span class='comment'># Lots of commands have the :layout option
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The Title</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='symbol'>:title</span>

  <span class='comment'># Layouts also support YAML merge keys toreuse settings
</span>  <span class='id identifier rubyid_svg'>svg</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>     <span class='label'>layout:</span> <span class='symbol'>:icon_left</span>
  <span class='id identifier rubyid_png'>png</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse.png</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='symbol'>:icon_middle</span>
  <span class='id identifier rubyid_svg'>svg</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner.svg</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>     <span class='label'>layout:</span> <span class='symbol'>:icon_right</span>

  <span class='comment'># Squib has its own, richer merge key: &quot;extends&quot;
</span>  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>fill_color:</span> <span class='symbol'>:black</span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='symbol'>:bonus</span>
  <span class='id identifier rubyid_rect'>rect</span> <span class='label'>fill_color:</span> <span class='symbol'>:white</span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='symbol'>:bonus_inner</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Extends!</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>    <span class='label'>layout:</span> <span class='symbol'>:bonus_text</span>

  <span class='comment'># Strings can also be used to specify a layout (e.g. from a data file)
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>subtitle</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>subtitle</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># For debugging purposes, you can always print out the loaded layout
</span>  <span class='comment'># require &#39;pp&#39;
</span>  <span class='comment'># pp layout
</span>
  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>layout_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>layout:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-layout.yml</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-layout2.yml</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The Title</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>       <span class='label'>layout:</span> <span class='symbol'>:title</span>       <span class='comment'># from custom-layout.yml
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The Subtitle</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>    <span class='label'>layout:</span> <span class='symbol'>:subtitle</span>    <span class='comment'># redefined in custom-layout2.yml
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The Description</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='symbol'>:description</span> <span class='comment'># from custom-layout2.yml
</span>  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>layout2_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='comment'># Built-in layouts are easy to use and extend
</span><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>playing-card.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A\u2660</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>      <span class='label'>layout:</span> <span class='symbol'>:bonus_ul</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans bold 100</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:red</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A\u2660</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>      <span class='label'>layout:</span> <span class='symbol'>:bonus_lr</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sans bold 100</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:red</span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>artwork here</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='symbol'>:art</span><span class='comma'>,</span> <span class='label'>hint:</span> <span class='symbol'>:red</span>
  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>layout_builtin_playing_card_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='comment'># Built-in layouts are easy to use and extend
</span><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>layout:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hand.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='qwords_beg'>%w(</span><span class='tstring_content'>title</span><span class='words_sep'> </span><span class='tstring_content'>bonus1</span><span class='words_sep'> </span><span class='tstring_content'>bonus2</span><span class='words_sep'> </span><span class='tstring_content'>bonus3</span><span class='words_sep'> </span><span class='tstring_content'>bonus4</span><span class='words_sep'> </span><span class='tstring_content'>bonus5</span><span class='words_sep'>
</span><span class='tstring_content'>    description</span><span class='words_sep'> </span><span class='tstring_content'>snark</span><span class='words_sep'> </span><span class='tstring_content'>art</span><span class='words_sep'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_icon'>icon</span><span class='op'>|</span>
    <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_icon'>icon</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='id identifier rubyid_icon'>icon</span><span class='comma'>,</span>
         <span class='label'>hint:</span> <span class='symbol'>:red</span><span class='comma'>,</span> <span class='label'>valign:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>middle</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>align:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>center</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_png'>png</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>pokercard.png</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>alpha:</span> <span class='float'>0.5</span>
  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>layout_builtin_hand_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre></p>

<h2>Backends: Raster vs. Vector</h2>

<p>Under the hood, Cairo has the ability to support a variety of surfaces to draw on, including both raster images stored in memory and vectors stored in SVG files. Thus, Squib supports the ability to handle both. They are options in the configuration file <code>backend: memory</code> or <code>backend: svg</code>.</p>

<p>If you save to a PDF then the backend will determine how your cards are saved too. For <code>memory</code>, the PDF will be filled with compressed raster images and be a larger file (yet it will still print at high quality... see discussion below). For SVG backends, PDFs will be smaller. If you have your deck backed by SVG, then the cards are auto-saved, so there is no <code>save_svg</code> in Squib. (Technically, the operations are stored and then flushed to the SVG file at the very end.)</p>

<p>There are trade-offs that one should consider here.</p>

<ul>
<li><em>Print quality is <strong>higher</strong> for raster images</em>. This seems counterintuitive at first, but consider where Squib sits in your workflow. It&#39;s the final assembly line for your cards before they get printed. Cairo puts <em>a ton</em> of work into rendering each pixel perfectly when it works with raster images. Printers, on the other hand, don&#39;t think in vectors and will render your paths in their own memory with their own embedded libraries without putting a lot of work into antialiasing and various other graphical esoterica. You may notice that print-on-demand companies such as The Game Crafter <a href="https://www.thegamecrafter.com/help/supported-file-types">only accept raster file types</a>, because they don&#39;t want their customers complaining about printers not rendering vectors with enough care.</li>
<li><em>PDFs are <strong>smaller</strong> for SVG back ends</em>. If file size is a limitation for you, and it can be for some printers or internet forums, then an SVG back end for vectorized PDFs is the way to go.</li>
<li><em>Squib is <strong>greedy</strong> with memory</em>. While I&#39;ve tested Squib with big decks on older computers, the <code>memory</code> backend is quite greedy with RAM. If memory is at a premium for you, switching to SVG might help.</li>
</ul>

<p>Note: you can still load PNGs into an SVG-backed deck and load SVGs into a memory-backed deck. To me, the sweet spot is to keep all of my icons, text, and other stuff in vector form for infinite scaling and then render them all to pixels with Squib.</p>

<p>Fortunately, switching backends in Squib should be as trivial as changing the setting in the config file. So go ahead and experiment with both and see what works for you. See below for how the configuration options work.</p>

<h2>Configuration File</h2>

<p>Squib supports various configuration properties that can be specified in an external file. The <code>config:</code> option in <code>Deck.new</code> can specify an optional configuration file in YML format. The properties there are intended to be immutable for the life of the Deck. The options include:</p>

<ul>
<li><code>progress_bars</code> (Boolean, default: false).  When set to <code>true</code>, long-running operations will show a progress bar on the command line.</li>
<li><code>hint</code> (ColorString, default: off). Text hints are used to show the boundaries of text boxes. Can be enabled/disabled for individual commands, or set globally with the <code>set</code> command. This setting is overriden by <code>set</code> and individual commands.</li>
<li><code>custom_colors</code> (Hash of Colors, default: {}). Defines globally-available colors available to the deck that can be specified in commands.</li>
<li><code>antialias</code> (<code>fast, good, best, none, gray, subpixel</code>, default: best). Set the algorithm that Cairo will use for antialiasing. Using our benchmarks on large decks, <code>best</code> is only ~10% slower anyway. For more info see the <a href="http://www.cairographics.org/manual/cairo-cairo-t.html#cairo-antialias-t">Cairo docs</a>.</li>
<li><code>backend</code> (<code>svg</code> or <code>memory</code>, default: <code>memory</code>). Defines how Cairo will store the operations. Memory is recommended for higher quality rendering.</li>
<li><code>prefix</code> (default: <code>card_</code>). When using an SVG backend, cards are auto-saved with this prefix and <code>&quot;%02d&quot;</code> numbering format.</li>
</ul>

<p>For debugging/sanity purposes, if you want to make sure your configuration options are parsed correclty, the above options are also available as methods within Squib::Deck, for example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_backend'>backend</span> <span class='comment'># prints &#39;memory&#39; by default
</span><span class='kw'>end</span>
</code></pre>

<p>The following sample demonstrates the config file, found <a href="https://github.com/andymeneely/squib/tree/master/samples/">here</a></p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>config:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-config.yml</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='comment'># Custom color defined in our config
</span>  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:foo</span>

  <span class='comment'># Hints can be turned on in the config file
</span>  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The Title</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>78</span><span class='comma'>,</span> <span class='label'>width:</span> <span class='int'>825</span><span class='comma'>,</span>
       <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 72</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>align:</span> <span class='symbol'>:center</span>

  <span class='comment'># Progress bars are shown for these commands
</span>  <span class='comment'># And images are taken from img_dir, not the cwd.
</span>  <span class='id identifier rubyid_png'>png</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>shiny-purse2.png</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>620</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>75</span>
  <span class='id identifier rubyid_svg'>svg</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spanner2.svg</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>620</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>218</span>
  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-config_</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_save_pdf'>save_pdf</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>custom-config-out.pdf</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>end</span></pre></p>

<h2>Importing from Excel and CSV</h2>

<p>Squib supports importing data from <code>xlsx</code> files and <code>csv</code> files. These methods are column-based, which means that they assume you have a header row in your table, and that header row will define the column. Squib will return a <code>Hash</code> of <code>Arrays</code> correspoding to each row. Warnings are thrown on things like duplicate columns. See the <code>excel.rb</code> and the <code>csv_import.rb</code> sample found <a href="https://github.com/andymeneely/squib/tree/master/samples/">here</a>.</p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>cards:</span> <span class='int'>3</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='symbol'>:white</span>

  <span class='comment'># Takes the first sheet by default
</span>  <span class='comment'># Outputs a hash of arrays with the header names as keys
</span>  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_xlsx'>xlsx</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sample.xlsx</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>250</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>55</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 54</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Level</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 72</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Description</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>x:</span> <span class='int'>65</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='int'>600</span><span class='comma'>,</span> <span class='label'>font:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arial 36</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># You can also specify the sheet, starting at 0
</span>  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_xlsx'>xlsx</span> <span class='label'>file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sample.xlsx</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>sheet:</span> <span class='int'>2</span>

  <span class='id identifier rubyid_save'>save</span> <span class='label'>format:</span> <span class='symbol'>:png</span><span class='comma'>,</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sample_excel_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre></p>

<p>Of course, you can always import your game data other ways using just Ruby. There&#39;s nothing special about Squib&#39;s methods other than their convenience.</p>

<h2>Making Squib Verbose</h2>

<p>By default, Squib&#39;s logger is set to WARN, but more fine-grained logging is embedded in the code. To set the logger, just put this at the top of your script:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Squib</span><span class='op'>::</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='const'>Logger</span><span class='op'>::</span><span class='const'>INFO</span>
</code></pre>

<p>If you REALLY want to see tons of output, you can also set DEBUG, but that&#39;s not intended for general consumption.</p>

<h1>&quot;Best&quot; Practices</h1>

<p>Here&#39;s a collection of workflow tips and code snippets that will hopefully improve your Squibbing. Contributions are welcome!</p>

<h2>Staying DRY</h2>

<p>Squib tries to keep you DRY (Don&#39;t Repeat Yourself) with the following features:</p>

<ul>
<li>Custom layouts allow you to specify various arguments in a separate file. This is great for x-y coordinates and alignment properties that would otherwise clutter up perfectly readable code. Squib goes even further and has a special &quot;extends&quot; that works especially well for grouped-together styles.</li>
<li>Flexible ranges and array handling: the <code>range</code> parameter in Squib is very flexible, meaning that one <code>text</code> command can specify different text in different fonts, styles, colors, etc. for each card. If you find yourself doing multiple <code>text</code> command for the same field across different ranges of cards, there&#39;s probably a better way to condense.</li>
<li>Custom colors keep you from hardcoding magic color strings everywhere. Custom colors go into <code>config.yml</code> file.</li>
<li>Plus, you know, Ruby.</li>
</ul>

<h2>Get to know Ruby&#39;s Array and Enumerable</h2>

<p>Don&#39;t know Ruby? Welcome! We are so happy that Squib is your excuse to learn Ruby.</p>

<p>Ruby has a <em>very</em> rich library for all of its built-in data types, especially <a href="http://ruby-doc.org/core-2.2.0/Array.html">Array</a>, and it&#39;s broader module <a href="http://ruby-doc.org/core-2.2.0/Enumerable.html">Enumerable</a>. Since Squib primarily takes in arrays into most of its fields, getting to know these methods will help you out enormously:</p>

<ul>
<li><a href="http://ruby-doc.org/core-2.2.0/Array.html#method-i-each">Array#each</a> - do something on each element of the array (Ruby folks seldom use for-loops)</li>
<li><a href="http://ruby-doc.org/core-2.2.0/Array.html#method-i-map">Array#map</a> - do something on each element of an array and put it into a new array</li>
<li><a href="http://ruby-doc.org/core-2.2.0/Array.html#method-i-select">Array#select</a> - select a subset of an array</li>
<li><a href="http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_index">Enumerable#each_with_index</a> - do something to each element, also being aware of the index</li>
<li><a href="http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-zip">Array#zip</a> - combine two arrays, element by element</li>
</ul>

<h2>Source control</h2>

<p>You are using source control, right??</p>

<p>By default, Squib assumes Git. But it&#39;s not dogmatic about it. Tracking your progress, backing up, sharing data, topic branches, release management, and reverting into history are just some of the many, many useful things you can do with source control. For me, I tend to ignore any auto-generated files in my output folder, but version control everything else. I also try to keep my graphics vector files, so the files stay small. Version control is intended for source code, so large binary files that change often probably should not get checked in unless absolutely necessary. I tend to keep big raster graphics files (e.g. from Gimp) in cloud storage or elsewhere.</p>

<h2>SublimeText</h2>

<p>Using SublimeText? I like you already. I&#39;ve written up some Squib snippets to ease remembering Squib commands. It&#39;s called <code>Squib Snippets</code> on Package Control. Compatible with SublimeText 3. Source code is also <a href="https://github.com/andymeneely/sublime-squib">on Github</a> (contributions welcome!). Check it out:</p>

<p><img src="https://raw.githubusercontent.com/andymeneely/squib/screencasts/sublime-squib-snippets.gif" alt="Sublime Squib Snippets"></p>

<h2>Decks with multiple orientations or sizes</h2>

<p>If you want to make a deck that has some portrait and some landscape cards, I recommend you use multiple <code>Squib::Deck</code>s. The pixel size of a given card is designed to not change thorughout the life of a <code>Squib::Deck</code>. To work with landscape cards, there is a <code>rotate</code> option on <code>save_png</code> so you can render your print-on-demand PNGs in portrait but keep everything else oriented toward landscape. The following example demonstrates how to do this, found <a href="https://github.com/andymeneely/squib/tree/master/samples/portrait-landscape.rb">here</a>.</p>

<p><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># For decks with both landscape and portrait orientations,
</span><span class='comment'># we recommend using two separate decks.
</span><span class='comment'># For print-on-demand, we can rotate all of the images in the final step.
</span>
<span class='comment'># Normal cards
</span><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>width:</span> <span class='int'>825</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>1125</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#aaa</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This is portrait</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>portrait_</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='comment'># Money cards are landscape
</span><span class='const'>Squib</span><span class='op'>::</span><span class='const'>Deck</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>width:</span> <span class='int'>1125</span><span class='comma'>,</span> <span class='label'>height:</span> <span class='int'>825</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_background'>background</span> <span class='label'>color:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#aaa</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_text'>text</span> <span class='label'>str:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This is landscape</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_save_png'>save_png</span> <span class='label'>prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>landscape_</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>rotate:</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre></p>

<h2>Rakefile</h2>

<p>When you run <code>squib new</code>, you are given a basic Rakefile. At this stage of Squib, it&#39;s basically just a shortcut for <code>ruby deck.rb</code>. But, even in this simple form this Rakefile has some advantages:</p>

<ul>
<li>If you&#39;re in a subdirectory at the time, <code>rake</code> will simply traverse up and <code>cd</code> to the proper directory so you don&#39;t get rogue <code>_output</code> directories</li>
<li>If you find yourself building multiple decks, you can make your own tasks for each one individually, or all (e.g. <code>rake marketing</code>)</li>
<li>Don&#39;t need the <code>require squib</code> at the top of your code (although that breaks <code>ruby deck.rb</code>, so that&#39;s probably a bad idea)</li>
</ul>

<h2>Using Google Sheets</h2>

<p>We don&#39;t officially support Google Sheets (<a href="https://github.com/andymeneely/squib/issues/49">yet</a>), but <a href="https://gist.github.com/pickfifteen/aeee73ec2ce162b0aee8">this Gist</a> might be helpful in automatically exporting the CSV.</p>

<h2>Combining Multiple Columns</h2>

<p>Say you have multiple columns in your Excel sheet that need to be combined into one text field on your card. Consider using <code>zip</code> in conjunction with <code>map</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuyText</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuyAmount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuyType</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_amt'>amt</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='op'>|</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>You may purchase </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_amt'>amt</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='comment'>#e.g. You may purchase 1 Wood.
</span><span class='kw'>end</span>

<span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cost</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action Cost</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Card Cost</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ac'>ac</span><span class='comma'>,</span> <span class='id identifier rubyid_cc'>cc</span><span class='op'>|</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:action:</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_ac'>ac</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:card</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cc'>cc</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Second example adapted from <a href="https://github.com/andymeneely/squib/issues/90">this conversation</a></p>

<h1>Get Involved</h1>

<p>Squib is an open source tool, so I welcome participation. Squib is currently in pre-release alpha, so the API is still maturing. I do change my mind about the names and meaning of things at this stage. I will document these changes as best as I can.</p>

<p>I also highly recommend upgrading to new versions of Squib every chance you get (using Bundler). You can watch for new upgrades by following the RubyGems <a href="https://rubygems.org/gems/squib/versions.atom">RSS</a>, or by watching the project on GitHub.</p>

<p>For bugs and feature requests, feel free to <a href="https://github.com/andymeneely/squib/issues">file a bug or feature request</a>. A minimal code example along with your OS and Ruby details would be ideal.</p>

<h2>New to Programming?</h2>

<p>I often hear statements like &quot;I&#39;m not a programmer, but I want to use Squib.&quot; If you want to use Squib, then maybe you really were a programmer all along :)</p>

<p>Squib is a Ruby library. To learn Squib, you will need to learn Ruby. There is no getting around that fact. Don&#39;t fight it, embrace it.</p>

<p>Fortunately, Ruby is wonderfully rich in features and very expressive in its syntax. Ruby has a vibrant, friendly community (much like tabletop game designers!). Ruby is the language of choice for many new programmers, including many universities. Plus, learning how to code is ubiquitous on the Internet.</p>

<p>Doubly fortunately, Squib doesn&#39;t require tons of Ruby-fu to get going either. The main things you&#39;ll need to know are:</p>

<ul>
<li>Working on the command line</li>
<li>Ruby Arrays, so that the <code>range</code> parameter makes more sense</li>
<li>Strings, variables, and symbols</li>
<li>If you are using Excel or CSV, then Ruby hashes are worth a glance.</li>
<li>Working iteratively: making small edits and run your code frequently (every few minutes)</li>
</ul>

<p>Anything related to Ruby on Rails is not necessary to learn for Squib. Rails is a heavyweight framework for web development (awesome in its own way, but not relevant to learning Ruby). Squib is about scripting.</p>

<h2>Get Help</h2>

<p>There are lots of people using Squib already. If you&#39;ve gone through the <a href="https://github.com/andymeneely/squib/tree/master/samples">samples</a> and still have questions, here are some other places to get help.</p>

<ul>
<li>Our <a href="http://boardgamegeek.com/thread/1293453">thread on BoardGameGeek</a> is quite active and informal (if a bit unstructured).</li>
<li><a href="http://stackoverflow.com/questions/ask?tags=ruby%20squib">StackOverflow</a> with the tag &quot;ruby&quot; and &quot;squib&quot; will get you answers quickly and a great way to document questions for future Squibbers.</li>
</ul>

<p>Please use GitHub issues for bugs and feature requests.</p>

<h2>Testing Pre-Builds</h2>

<p>If you want to test new features as I develop them, you can always point your Gemfile to the repository. Your Gemfile specification looks like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>squib</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>git:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>git://github.com/andymeneely/squib</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>branch:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dev</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<ul>
<li>The <code>dev</code> branch is where I am working on features in-process. I have not done much regression testing at this point, but would love testing feedback nonetheless.</li>
<li>The <code>master</code> branch is where I consider features and bug that are done and tested, but not released yet.</li>
</ul>

<h2>Contributing</h2>

<p>If you want your code integrated:</p>

<ol>
<li>Fork the git repository ( <a href="https://github.com/%5Bmy-github-username%5D/squib/fork">https://github.com/[my-github-username]/squib/fork</a> )</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am &#39;Add some feature&#39;</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request</li>
</ol>

<p>Be sure to run the unit tests and packaging with just <code>rake</code>. Also, you can check that the samples render properly with <code>rake sanity</code>.</p>

<h1>What&#39;s up the with the name?</h1>

<p>Truthfully, I just thought it was a cool, simple word that was not used much in the Ruby community nor the board game community. But, now that I&#39;ve committed to the name, I&#39;ve realized that:</p>

<ul>
<li>Squibs are small explosive devices, much like Squib &quot;explodes&quot; your rules into a playable game</li>
<li>Squibs are often used in heist movies, leading to a sudden plot twist that often resembles the twists of good tabletop game</li>
<li>Squibs are also part of the Harry Potter world - they are people who are non-magical but wizard-born. Squib is aware of wizarding magic and comes from that heritage, but it&#39;s not magical itself.</li>
</ul>
</div></div>

    <div id="footer">
  Generated on Fri Sep 11 11:05:21 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.0.0).
</div>

      <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-54811605-1', 'auto');
      ga('send', 'pageview');

   </script>
  </body>

</html>